<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stray Animal Database - EcoLife</title>
    <link rel="stylesheet" href="../css/global/variables.css">
    <link rel="stylesheet" href="../css/global/utilities.css">
    <link rel="stylesheet" href="../css/components/navbar.css">
    <link rel="stylesheet" href="../css/components/footer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #1565C0 0%, #1976D2 100%); }
        
        .database-header { background: linear-gradient(135deg, #0D47A1 0%, #1565C0 100%); color: white; padding: 80px 20px 40px; text-align: center; }
        .database-header h1 { font-size: 3rem; margin-bottom: 1rem; }
        .database-header p { font-size: 1.2rem; opacity: 0.9; }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .stats-banner { background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%); color: white; padding: 25px; border-radius: 20px; margin: 30px 0; text-align: center; }
        .database-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin: 20px 0; }
        .stat-item { text-align: center; }
        .stat-number { font-size: 2.5rem; font-weight: bold; }
        .stat-label { opacity: 0.9; margin-top: 5px; }
        
        .search-section { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); margin: 30px 0; }
        .search-grid { display: grid; grid-template-columns: 1fr auto auto auto; gap: 15px; align-items: end; }
        .search-input { padding: 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1rem; }
        .search-input:focus { border-color: #1565C0; outline: none; }
        .filter-select { padding: 15px; border: 2px solid #e0e0e0; border-radius: 10px; background: white; cursor: pointer; }
        
        .main-content { display: grid; grid-template-columns: 1fr 300px; gap: 30px; margin: 30px 0; }
        .content-area { display: flex; flex-direction: column; gap: 25px; }
        .sidebar { display: flex; flex-direction: column; gap: 20px; }
        
        .nav-tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .nav-tab { padding: 12px 24px; background: white; border: none; border-radius: 25px; cursor: pointer; transition: all 0.3s; color: #333; }
        .nav-tab.active { background: #1565C0; color: white; }
        
        .content-section { display: none; }
        .content-section.active { display: block; }
        
        .animal-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .animal-card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 8px 25px rgba(0,0,0,0.1); transition: all 0.3s; cursor: pointer; }
        .animal-card:hover { transform: translateY(-5px); }
        .animal-image { height: 200px; background: linear-gradient(45deg, #4CAF50, #45a049); display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem; position: relative; }
        .status-badge { position: absolute; top: 10px; right: 10px; padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; font-weight: bold; }
        .status-active { background: #4CAF50; color: white; }
        .status-adopted { background: #FF9800; color: white; }
        .status-missing { background: #f44336; color: white; }
        .animal-info { padding: 20px; }
        .animal-name { font-size: 1.3rem; font-weight: bold; margin-bottom: 10px; color: #333; }
        .animal-details { display: flex; gap: 15px; margin: 10px 0; font-size: 0.9rem; color: #666; }
        .animal-location { color: #1565C0; font-weight: 500; }
        .animal-actions { display: flex; gap: 10px; margin-top: 15px; }
        
        .map-container { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); height: 400px; display: flex; align-items: center; justify-content: center; color: #666; }
        .map-placeholder { text-align: center; }
        
        .add-animal-form { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .form-group { display: flex; flex-direction: column; gap: 8px; }
        .form-group label { font-weight: 600; color: #333; }
        .form-group input, .form-group select, .form-group textarea { padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { border-color: #1565C0; outline: none; }
        .form-group textarea { height: 100px; resize: vertical; }
        
        .photo-upload { border: 2px dashed #ccc; padding: 30px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s; margin: 20px 0; }
        .photo-upload:hover { border-color: #1565C0; background: #f8f9fa; }
        .photo-preview { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; margin: 15px 0; }
        .preview-item { position: relative; border-radius: 10px; overflow: hidden; }
        .preview-item img { width: 100%; height: 100px; object-fit: cover; }
        .remove-photo { position: absolute; top: 5px; right: 5px; background: #f44336; color: white; border: none; border-radius: 50%; width: 25px; height: 25px; cursor: pointer; }
        
        .sidebar-section { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .sidebar-title { font-size: 1.2rem; margin-bottom: 15px; color: #1565C0; border-bottom: 2px solid #1976D2; padding-bottom: 10px; }
        
        .recent-activity { max-height: 300px; overflow-y: auto; }
        .activity-item { padding: 15px; border-bottom: 1px solid #f0f0f0; }
        .activity-item:last-child { border-bottom: none; }
        .activity-type { background: #e3f2fd; color: #1565c0; padding: 4px 8px; border-radius: 8px; font-size: 0.8rem; display: inline-block; margin-bottom: 5px; }
        .activity-text { color: #666; font-size: 0.9rem; }
        .activity-time { color: #999; font-size: 0.8rem; }
        
        .quick-stats { margin: 15px 0; }
        .quick-stat { display: flex; justify-content: space-between; margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 8px; }
        .stat-label-small { color: #666; }
        .stat-value { font-weight: bold; color: #1565C0; }
        
        .lost-pet-match { background: #fff3e0; padding: 15px; border-radius: 10px; margin: 10px 0; border-left: 4px solid #ff9800; }
        .match-title { font-weight: bold; color: #e65100; margin-bottom: 5px; }
        .match-text { color: #666; font-size: 0.9rem; }
        .match-confidence { color: #ff9800; font-weight: bold; font-size: 0.8rem; }
        
        .btn { padding: 12px 20px; background: #1565C0; color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 0.9rem; font-weight: bold; transition: all 0.3s; }
        .btn:hover { background: #0D47A1; transform: translateY(-2px); }
        .btn-secondary { background: #f5f5f5; color: #333; }
        .btn-secondary:hover { background: #e0e0e0; }
        .btn-success { background: #4CAF50; }
        .btn-success:hover { background: #45a049; }
        .btn-warning { background: #FF9800; }
        .btn-warning:hover { background: #f57c00; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; }
        .modal-content { background: white; margin: 50px auto; padding: 30px; border-radius: 15px; max-width: 600px; max-height: 80vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .close-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #999; }
        
        @media (max-width: 768px) {
            .database-header h1 { font-size: 2rem; }
            .main-content { grid-template-columns: 1fr; }
            .search-grid { grid-template-columns: 1fr; }
            .form-grid { grid-template-columns: 1fr; }
            .animal-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div id="navbar-container"></div>
    
    <div class="database-header">
        <div class="container">
            <h1><i class="fas fa-database"></i> Stray Animal Database</h1>
            <p>Community-driven tracking system to help, identify, and care for stray animals</p>
        </div>
    </div>
    
    <div class="container">
        <div class="stats-banner">
            <h2>üìä Database Statistics</h2>
            <div class="database-stats">
                <div class="stat-item">
                    <div class="stat-number">1,247</div>
                    <div class="stat-label">Animals Tracked</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">89</div>
                    <div class="stat-label">Reunited with Owners</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">156</div>
                    <div class="stat-label">Successfully Adopted</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">234</div>
                    <div class="stat-label">Active Volunteers</div>
                </div>
            </div>
        </div>
        
        <div class="search-section">
            <div class="search-grid">
                <input type="text" class="search-input" placeholder="Search by name, breed, location, or ID..." id="searchInput">
                <select class="filter-select" id="speciesFilter">
                    <option value="">All Species</option>
                    <option value="dog">Dogs</option>
                    <option value="cat">Cats</option>
                    <option value="other">Other</option>
                </select>
                <select class="filter-select" id="statusFilter">
                    <option value="">All Status</option>
                    <option value="active">Active</option>
                    <option value="adopted">Adopted</option>
                    <option value="missing">Missing</option>
                </select>
                <button class="btn" onclick="performSearch()">
                    <i class="fas fa-search"></i> Search
                </button>
            </div>
        </div>
        
        <div class="main-content">
            <div class="content-area">
                <div class="nav-tabs">
                    <button class="nav-tab active" onclick="showSection('animals')">
                        <i class="fas fa-paw"></i> Animal Profiles
                    </button>
                    <button class="nav-tab" onclick="showSection('map')">
                        <i class="fas fa-map-marker-alt"></i> Location Map
                    </button>
                    <button class="nav-tab" onclick="showSection('add')">
                        <i class="fas fa-plus"></i> Add Animal
                    </button>
                    <button class="nav-tab" onclick="showSection('lost')">
                        <i class="fas fa-search"></i> Lost Pet Match
                    </button>
                </div>
                
                <!-- Animal Profiles Section -->
                <div id="animals" class="content-section active">
                    <div class="animal-grid">
                        <div class="animal-card" onclick="viewAnimalProfile('max001')">
                            <div class="animal-image">
                                üêï
                                <div class="status-badge status-active">Active</div>
                            </div>
                            <div class="animal-info">
                                <div class="animal-name">Max (ID: MAX001)</div>
                                <div class="animal-details">
                                    <span>Golden Retriever</span>
                                    <span>Male</span>
                                    <span>~3 years</span>
                                </div>
                                <div class="animal-location">üìç Central Park Area</div>
                                <p style="color: #666; font-size: 0.9rem; margin: 10px 0;">Friendly stray, well-fed, appears healthy. Regular feeding schedule established.</p>
                                <div class="animal-actions">
                                    <button class="btn btn-success">Update Status</button>
                                    <button class="btn btn-secondary">View History</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="animal-card" onclick="viewAnimalProfile('luna002')">
                            <div class="animal-image">
                                üê±
                                <div class="status-badge status-missing">Missing</div>
                            </div>
                            <div class="animal-info">
                                <div class="animal-name">Luna (ID: LUNA002)</div>
                                <div class="animal-details">
                                    <span>Tabby Cat</span>
                                    <span>Female</span>
                                    <span>~2 years</span>
                                </div>
                                <div class="animal-location">üìç Oak Street Area</div>
                                <p style="color: #666; font-size: 0.9rem; margin: 10px 0;">Missing since last week. Owner reported. Microchipped.</p>
                                <div class="animal-actions">
                                    <button class="btn btn-warning">Report Sighting</button>
                                    <button class="btn btn-secondary">Contact Owner</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="animal-card" onclick="viewAnimalProfile('buddy003')">
                            <div class="animal-image">
                                üêï
                                <div class="status-badge status-adopted">Adopted</div>
                            </div>
                            <div class="animal-info">
                                <div class="animal-name">Buddy (ID: BUDDY003)</div>
                                <div class="animal-details">
                                    <span>Mixed Breed</span>
                                    <span>Male</span>
                                    <span>~5 years</span>
                                </div>
                                <div class="animal-location">üìç Adopted - Success Story!</div>
                                <p style="color: #666; font-size: 0.9rem; margin: 10px 0;">Successfully adopted after 2 months of care. Now living happily with new family.</p>
                                <div class="animal-actions">
                                    <button class="btn btn-success">View Success Story</button>
                                    <button class="btn btn-secondary">Share Story</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="animal-card" onclick="viewAnimalProfile('whiskers004')">
                            <div class="animal-image">
                                üê±
                                <div class="status-badge status-active">Active</div>
                            </div>
                            <div class="animal-info">
                                <div class="animal-name">Whiskers (ID: WHISK004)</div>
                                <div class="animal-details">
                                    <span>Black Cat</span>
                                    <span>Female</span>
                                    <span>~1 year</span>
                                </div>
                                <div class="animal-location">üìç Library Parking Lot</div>
                                <p style="color: #666; font-size: 0.9rem; margin: 10px 0;">Young cat, very shy. Needs TNR (Trap-Neuter-Return) procedure.</p>
                                <div class="animal-actions">
                                    <button class="btn btn-success">Schedule TNR</button>
                                    <button class="btn btn-secondary">Update Info</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Map Section -->
                <div id="map" class="content-section">
                    <div class="map-container">
                        <div class="map-placeholder">
                            <i class="fas fa-map" style="font-size: 4rem; margin-bottom: 20px; color: #1565C0;"></i>
                            <h3>Interactive Animal Location Map</h3>
                            <p>Map showing all tracked animals, feeding stations, and volunteer areas</p>
                            <button class="btn" style="margin-top: 20px;">Load Interactive Map</button>
                        </div>
                    </div>
                </div>
                
                <!-- Add Animal Section -->
                <div id="add" class="content-section">
                    <div class="add-animal-form">
                        <h2 style="margin-bottom: 20px; color: #1565C0;">Add New Animal to Database</h2>
                        
                        <form id="addAnimalForm">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="animalName">Animal Name/Nickname</label>
                                    <input type="text" id="animalName" placeholder="e.g., Max, Unknown">
                                </div>
                                <div class="form-group">
                                    <label for="animalSpecies">Species</label>
                                    <select id="animalSpecies">
                                        <option value="">Select Species</option>
                                        <option value="dog">Dog</option>
                                        <option value="cat">Cat</option>
                                        <option value="rabbit">Rabbit</option>
                                        <option value="bird">Bird</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="animalBreed">Breed (if known)</label>
                                    <input type="text" id="animalBreed" placeholder="e.g., Golden Retriever, Mixed">
                                </div>
                                <div class="form-group">
                                    <label for="animalAge">Estimated Age</label>
                                    <select id="animalAge">
                                        <option value="">Select Age</option>
                                        <option value="puppy">Puppy/Kitten (0-1 year)</option>
                                        <option value="young">Young (1-3 years)</option>
                                        <option value="adult">Adult (3-7 years)</option>
                                        <option value="senior">Senior (7+ years)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="animalGender">Gender</label>
                                    <select id="animalGender">
                                        <option value="">Select Gender</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                        <option value="unknown">Unknown</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="animalSize">Size</label>
                                    <select id="animalSize">
                                        <option value="">Select Size</option>
                                        <option value="small">Small (under 25 lbs)</option>
                                        <option value="medium">Medium (25-60 lbs)</option>
                                        <option value="large">Large (60+ lbs)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="animalLocation">Location Found</label>
                                <input type="text" id="animalLocation" placeholder="Specific address or landmark">
                            </div>
                            
                            <div class="form-group">
                                <label for="animalCondition">Health/Condition Notes</label>
                                <textarea id="animalCondition" placeholder="Describe the animal's health, behavior, any injuries or special needs..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="animalBehavior">Behavior Notes</label>
                                <textarea id="animalBehavior" placeholder="Friendly, shy, aggressive, etc. Any special behavioral observations..."></textarea>
                            </div>
                            
                            <div class="photo-upload" onclick="document.getElementById('photoInput').click()">
                                <i class="fas fa-camera" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                <p>Click to upload photos</p>
                                <small>Upload clear photos to help with identification (Max 5 photos)</small>
                                <input type="file" id="photoInput" accept="image/*" multiple style="display: none;">
                            </div>
                            <div class="photo-preview" id="photoPreview"></div>
                            
                            <div style="display: flex; gap: 15px; margin-top: 30px;">
                                <button type="submit" class="btn btn-success">
                                    <i class="fas fa-plus"></i> Add to Database
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="resetForm()">
                                    <i class="fas fa-undo"></i> Reset Form
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Lost Pet Match Section -->
                <div id="lost" class="content-section">
                    <div class="add-animal-form">
                        <h2 style="margin-bottom: 20px; color: #1565C0;">Lost Pet Matching System</h2>
                        <p style="color: #666; margin-bottom: 20px;">Upload a photo of a found animal to check for matches with reported missing pets.</p>
                        
                        <div class="photo-upload" onclick="document.getElementById('matchPhotoInput').click()">
                            <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <p>Upload photo for matching</p>
                            <small>AI-powered matching system will compare with missing pet reports</small>
                            <input type="file" id="matchPhotoInput" accept="image/*" style="display: none;">
                        </div>
                        
                        <div id="matchResults" style="display: none; margin-top: 20px;">
                            <h3>Potential Matches Found:</h3>
                            <div class="lost-pet-match">
                                <div class="match-title">üêï Possible Match: "Rocky"</div>
                                <div class="match-text">Golden Retriever, Male, Missing from Pine Street area</div>
                                <div class="match-confidence">Match Confidence: 87%</div>
                                <button class="btn btn-warning" style="margin-top: 10px;">Contact Owner</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar">
                <!-- Recent Activity -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-clock"></i> Recent Activity</h3>
                    
                    <div class="recent-activity">
                        <div class="activity-item">
                            <div class="activity-type">New Sighting</div>
                            <div class="activity-text">Max spotted near Central Park fountain</div>
                            <div class="activity-time">2 hours ago</div>
                        </div>
                        
                        <div class="activity-item">
                            <div class="activity-type">Status Update</div>
                            <div class="activity-text">Luna marked as missing - owner contacted</div>
                            <div class="activity-time">4 hours ago</div>
                        </div>
                        
                        <div class="activity-item">
                            <div class="activity-type">Success Story</div>
                            <div class="activity-text">Buddy successfully adopted by Johnson family</div>
                            <div class="activity-time">1 day ago</div>
                        </div>
                        
                        <div class="activity-item">
                            <div class="activity-type">Medical Update</div>
                            <div class="activity-text">Whiskers scheduled for TNR procedure</div>
                            <div class="activity-time">2 days ago</div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Stats -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-chart-bar"></i> Quick Stats</h3>
                    
                    <div class="quick-stats">
                        <div class="quick-stat">
                            <span class="stat-label-small">This Week</span>
                            <span class="stat-value">12 new animals</span>
                        </div>
                        <div class="quick-stat">
                            <span class="stat-label-small">Pending TNR</span>
                            <span class="stat-value">8 animals</span>
                        </div>
                        <div class="quick-stat">
                            <span class="stat-label-small">Ready for Adoption</span>
                            <span class="stat-value">15 animals</span>
                        </div>
                        <div class="quick-stat">
                            <span class="stat-label-small">Active Volunteers</span>
                            <span class="stat-value">234 people</span>
                        </div>
                    </div>
                </div>
                
                <!-- Feeding Schedule -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title"><i class="fas fa-utensils"></i> Today's Feeding</h3>
                    
                    <div style="font-size: 0.9rem; line-height: 1.6;">
                        <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                            <strong>Central Park Station</strong><br>
                            <span style="color: #666;">7:00 AM - Max, Charlie (Volunteer: Sarah)</span>
                        </div>
                        <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                            <strong>Library Area</strong><br>
                            <span style="color: #666;">6:30 PM - Whiskers, Shadow (Volunteer: Mike)</span>
                        </div>
                        <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                            <strong>Oak Street</strong><br>
                            <span style="color: #666;">8:00 PM - Luna search area (Volunteer: Lisa)</span>
                        </div>
                    </div>
                    
                    <button class="btn" style="width: 100%; margin-top: 15px;">
                        Join Feeding Schedule
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Animal Profile Modal -->
    <div id="animalModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalAnimalName">Animal Profile</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div id="modalContent">
                <!-- Profile content will be loaded here -->
            </div>
        </div>
    </div>
    
    <div id="footer-container"></div>
    
    <script>
        let uploadedPhotos = [];
        
        // Navigation
        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
        }
        
        // Search functionality
        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value;
            const species = document.getElementById('speciesFilter').value;
            const status = document.getElementById('statusFilter').value;
            
            showNotification(`üîç Searching for: ${searchTerm || 'all animals'} ${species ? `(${species})` : ''} ${status ? `[${status}]` : ''}`);
        }
        
        // Animal profile modal
        function viewAnimalProfile(animalId) {
            const profiles = {
                'max001': {
                    name: 'Max',
                    id: 'MAX001',
                    species: 'Dog - Golden Retriever',
                    details: 'Male, ~3 years old, friendly and well-socialized',
                    location: 'Central Park Area',
                    status: 'Active',
                    history: 'First spotted 3 months ago. Regular feeding schedule established. Appears healthy and well-fed.'
                }
            };
            
            const profile = profiles[animalId] || profiles['max001'];
            document.getElementById('modalAnimalName').textContent = `${profile.name} (${profile.id})`;
            document.getElementById('modalContent').innerHTML = `
                <div style="margin: 20px 0;">
                    <h3>Animal Details</h3>
                    <p><strong>Species:</strong> ${profile.species}</p>
                    <p><strong>Details:</strong> ${profile.details}</p>
                    <p><strong>Location:</strong> ${profile.location}</p>
                    <p><strong>Status:</strong> ${profile.status}</p>
                    <h3 style="margin-top: 20px;">History</h3>
                    <p>${profile.history}</p>
                    <div style="margin-top: 20px;">
                        <button class="btn btn-success">Update Status</button>
                        <button class="btn btn-warning">Report Sighting</button>
                        <button class="btn btn-secondary">Edit Profile</button>
                    </div>
                </div>
            `;
            document.getElementById('animalModal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('animalModal').style.display = 'none';
        }
        
        // Photo upload handling
        document.getElementById('photoInput').addEventListener('change', handlePhotoUpload);
        document.getElementById('matchPhotoInput').addEventListener('change', handleMatchPhoto);
        
        function handlePhotoUpload(event) {
            const files = Array.from(event.target.files);
            files.forEach(file => {
                if (file.type.startsWith('image/') && uploadedPhotos.length < 5) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        uploadedPhotos.push({ file: file, url: e.target.result });
                        updatePhotoPreview();
                    };
                    reader.readAsDataURL(file);
                }
            });
        }
        
        function handleMatchPhoto(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                showNotification('üîç Analyzing photo for matches...');
                setTimeout(() => {
                    document.getElementById('matchResults').style.display = 'block';
                    showNotification('‚úÖ Found 1 potential match! Check results below.');
                }, 2000);
            }
        }
        
        function updatePhotoPreview() {
            const preview = document.getElementById('photoPreview');
            preview.innerHTML = '';
            
            uploadedPhotos.forEach((photo, index) => {
                const item = document.createElement('div');
                item.className = 'preview-item';
                item.innerHTML = `
                    <img src="${photo.url}" alt="Photo ${index + 1}">
                    <button class="remove-photo" onclick="removePhoto(${index})">&times;</button>
                `;
                preview.appendChild(item);
            });
        }
        
        function removePhoto(index) {
            uploadedPhotos.splice(index, 1);
            updatePhotoPreview();
        }
        
        // Form submission
        document.getElementById('addAnimalForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const animalData = {
                name: document.getElementById('animalName').value,
                species: document.getElementById('animalSpecies').value,
                breed: document.getElementById('animalBreed').value,
                age: document.getElementById('animalAge').value,
                gender: document.getElementById('animalGender').value,
                size: document.getElementById('animalSize').value,
                location: document.getElementById('animalLocation').value,
                condition: document.getElementById('animalCondition').value,
                behavior: document.getElementById('animalBehavior').value,
                photos: uploadedPhotos.length
            };
            
            if (!animalData.name || !animalData.species || !animalData.location) {
                showNotification('‚ùå Please fill in required fields: Name, Species, and Location');
                return;
            }
            
            const animalId = 'AN' + Date.now().toString().slice(-6);
            showNotification(`‚úÖ Animal added to database! ID: ${animalId}`);
            
            setTimeout(() => {
                resetForm();
                showSection('animals');
            }, 2000);
        });
        
        function resetForm() {
            document.getElementById('addAnimalForm').reset();
            uploadedPhotos = [];
            updatePhotoPreview();
        }
        
        // Notification system
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 1000;
                background: #1565C0; color: white; padding: 15px 20px;
                border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                transform: translateX(100%); transition: transform 0.3s;
                max-width: 300px;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.style.transform = 'translateX(0)', 100);
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }
        
        // Load navbar and footer
        document.addEventListener('DOMContentLoaded', function() {
            fetch('../components/navbar.html')
                .then(response => response.text())
                .then(data => document.getElementById('navbar-container').innerHTML = data)
                .catch(error => console.log('Navbar loading failed'));
            
            fetch('../components/footer.html')
                .then(response => response.text())
                .then(data => document.getElementById('footer-container').innerHTML = data)
                .catch(error => console.log('Footer loading failed'));
                
            // Welcome message
            setTimeout(() => {
                showNotification('üìä Welcome to the Stray Animal Database! Help us track and care for animals in need.');
            }, 1000);
        });
        
        // Close modal on outside click
        window.onclick = function(event) {
            const modal = document.getElementById('animalModal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>
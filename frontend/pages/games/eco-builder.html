<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glimmerwood Eco-Sphere</title>
    <link rel="stylesheet" href="../../css/pages/games/eco-builder.css">
<link rel="stylesheet" href="../../css/global/utilities.css" />
  <link rel="stylesheet" href="../../css/components/footer.css" />
  <link rel="stylesheet" href="../../css/components/navbar.css" />
</head>
<body>

    <div id="cursor-container"></div>
<script src="../../js/components/loadComponents.js"></script>


  <div id="navbar-container"></div>
    <!-- Intro Screen -->
    <div id="introScreen" class="screen active">
        <div class="intro-container">
            <h1 class="game-title">Glimmerwood Eco-Sphere!</h1>
            <p class="game-description">
                Build a thriving ecosystem and<br>
                Keep the Bio-Bar full to win!
            </p>
            <button class="btn-primary" id="startBtn">Start Game</button>
            <button class="btn-secondary" id="instructionsBtn">How to Play</button>
        </div>
        <div class="starfield"></div>
    </div>

    <!-- Instructions Modal -->
    <div id="instructionsModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>How to Play</h2>
            <div class="instructions-list">
                <div class="instruction-item">
                    <span class="icon">‚öñÔ∏è</span>
                    <div>
                        <h3>Balance is Everything!</h3>
                        <p>Create a balanced ecosystem with plants, herbivores, predators, and water. Too much of one thing is bad!</p>
                    </div>
                </div>
                <div class="instruction-item">
                    <span class="icon">üå±</span>
                    <div>
                        <h3>Food Chain Rules</h3>
                        <p>Herbivores need plants to survive. Predators need herbivores. Keep the food chain balanced!</p>
                    </div>
                </div>
                <div class="instruction-item">
                    <span class="icon">‚≠ê</span>
                    <div>
                        <h3>Win Condition</h3>
                        <p>Reach 500 points with Threat Level below 30% and Bio-Stability above 70%</p>
                    </div>
                </div>
                <div class="instruction-item">
                    <span class="icon">üí°</span>
                    <div>
                        <h3>Strategy Tips</h3>
                        <p>Click on a bio-asset, then click on the canvas to place it. Points only increase when ecosystem is balanced. Aim for 40% plants, 30% herbivores, 20% predators, 10% water.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
        <!-- Header Stats -->
        <div class="game-header">
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-label">Bio-Stability</div>
                    <div class="progress-bar">
                        <div class="progress-fill bio-progress" id="bioProgress"></div>
                    </div>
                    <div class="stat-value" id="bioValue">100%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Threat Level</div>
                    <div class="progress-bar">
                        <div class="progress-fill threat-progress" id="threatProgress"></div>
                    </div>
                    <div class="stat-value" id="threatValue">0%</div>
                </div>
            </div>
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-label">Points</div>
                    <div class="progress-bar">
                        <div class="progress-fill points-progress" id="pointsProgress"></div>
                    </div>
                    <div class="stat-value" id="pointsValue">0</div>
                </div>
                <div class="stat-card center-stat">
                    <div class="ecosystem-status" id="ecosystemStatus">
                        <span class="status-number">0</span>
                        <span class="status-text">Ecosystem Empty</span>
                        <span class="status-stars">‚≠ê</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Game Area -->
        <div class="game-main">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="back-button" id="backBtn">
                    <span>‚Üê</span> Back to Menu
                </div>
                
                <div class="asset-shop">
                    <h3 class="section-title">Asset Shop</h3>
                    <div class="divider"></div>
                    
                    <h4 class="subsection-title">Bio-Assets (Click to Select)</h4>
                    <div class="bio-assets-list" id="bioAssetsList">
                        <div class="asset-item" data-type="plant" data-cost="10">
                            <div class="asset-icon">üå±</div>
                            <span class="asset-name">Plant</span>
                            <span class="asset-cost">10</span>
                        </div>
                        <div class="asset-item" data-type="herbivore" data-cost="20">
                            <div class="asset-icon">üê∞</div>
                            <span class="asset-name">Herbivore</span>
                            <span class="asset-cost">20</span>
                        </div>
                        <div class="asset-item" data-type="predator" data-cost="30">
                            <div class="asset-icon">ü¶ä</div>
                            <span class="asset-name">Predator</span>
                            <span class="asset-cost">30</span>
                        </div>
                        <div class="asset-item" data-type="water" data-cost="15">
                            <div class="asset-icon">üíß</div>
                            <span class="asset-name">Water</span>
                            <span class="asset-cost">15</span>
                        </div>
                    </div>

                    <div class="game-stats">
                        <h4 class="subsection-title">Game Stats</h4>
                        <div class="stat-row">
                            <span>üå± Plants</span>
                            <span id="plantsCount">0</span>
                        </div>
                        <div class="stat-row">
                            <span>üê∞ Herbivores</span>
                            <span id="herbivoresCount">0</span>
                        </div>
                        <div class="stat-row">
                            <span>ü¶ä Predators</span>
                            <span id="predatorsCount">0</span>
                        </div>
                        <div class="stat-row">
                            <span>üíß Water</span>
                            <span id="waterCount">0</span>
                        </div>
                        <div class="stat-row">
                            <span>‚è± Time</span>
                            <span id="timeValue">0s</span>
                        </div>
                    </div>

                    <button class="btn-reset" id="resetBtn">Reset Game</button>
                </div>
            </div>

            <!-- Game Canvas -->
            <div class="game-container">
                <div class="game-canvas" id="gameCanvas">
                    <canvas id="forestCanvas"></canvas>
                    <div class="entities-layer" id="entitiesLayer"></div>
                    <div class="particles-layer" id="particlesLayer"></div>
                </div>
                <div class="canvas-hint" id="canvasHint">
                    üëÜ Select an asset from the left, then click here to place it!
                </div>
            </div>

            <!-- Win Conditions Panel -->
            <div class="win-conditions-panel">
                <h3 class="win-title">üèÜ Win Conditions</h3>
                <div class="divider"></div>
                
                <div class="win-requirement" id="pointsReq">
                    <span class="req-icon">üí∞</span>
                    <div class="req-info">
                        <span class="req-label">Points Goal</span>
                        <span class="req-value" id="pointsReqValue">0 / 500</span>
                    </div>
                    <span class="req-status" id="pointsStatus">‚ùå</span>
                </div>

                <div class="win-requirement" id="bioReq">
                    <span class="req-icon">üå±</span>
                    <div class="req-info">
                        <span class="req-label">Bio-Stability</span>
                        <span class="req-value" id="bioReqValue">100% / 70%</span>
                    </div>
                    <span class="req-status" id="bioStatus">‚úÖ</span>
                </div>

                <div class="win-requirement" id="threatReq">
                    <span class="req-icon">‚ö†Ô∏è</span>
                    <div class="req-info">
                        <span class="req-label">Threat Level</span>
                        <span class="req-value" id="threatReqValue">0% / 30%</span>
                    </div>
                    <span class="req-status" id="threatStatus">‚úÖ</span>
                </div>

                <div class="divider"></div>

                <div class="balance-indicator">
                    <h4 class="balance-title">‚öñÔ∏è Ecosystem Balance</h4>
                    <div class="balance-bar">
                        <div class="balance-fill" id="balanceFill"></div>
                    </div>
                    <div class="balance-text" id="balanceText">0% Balanced</div>
                    <p class="balance-hint">üí° Points grow only when balanced!</p>
                </div>

                <div class="ideal-ratios">
                    <h4 class="subsection-title">üìä Ideal Ratios</h4>
                    <div class="ratio-item">
                        <span>üå± Plants</span>
                        <span>40%</span>
                    </div>
                    <div class="ratio-item">
                        <span>üê∞ Herbivores</span>
                        <span>30%</span>
                    </div>
                    <div class="ratio-item">
                        <span>ü¶ä Predators</span>
                        <span>20%</span>
                    </div>
                    <div class="ratio-item">
                        <span>üíß Water</span>
                        <span>10%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="screen">
        <div class="gameover-container">
            <h2 class="gameover-title">Game Over</h2>
            <div class="final-message">
                <h3>Final Results</h3>
                <p class="final-score">Your Score: <span id="finalScore">0</span> pts</p>
                <p class="final-text" id="finalMessage">Your ecosystem collapsed!</p>
            </div>
            <button class="btn-primary" id="playAgainBtn">Play Again</button>
            <button class="btn-secondary" id="mainMenuBtn">Main Menu</button>
        </div>
    </div>

    <!-- Victory Screen -->
    <div id="victoryScreen" class="screen">
        <div class="gameover-container victory">
            <h2 class="gameover-title victory-title">Victory! üéâ</h2>
            <div class="final-message">
                <h3>Congratulations!</h3>
                <p class="final-score">Your Score: <span id="victoryScore">0</span> pts</p>
                <p class="final-text">Your ecosystem thrives in perfect harmony!</p>
            </div>
            <button class="btn-primary" id="playAgainVictoryBtn">Play Again</button>
            <button class="btn-secondary" id="mainMenuVictoryBtn">Main Menu</button>
        </div>
    </div>

    <script src="../../js/pages/games/eco-builder.js"></script>
<!-- Footer placeholder -->
  <div id="footer-placeholder"></div>
<script src="/frontend/js/components/footer-loader.js"></script>
<script src="../../js/components/component-loader.js"></script>
    <script src="../../js/components/navbar-loader.js"></script>
</body>
</html>
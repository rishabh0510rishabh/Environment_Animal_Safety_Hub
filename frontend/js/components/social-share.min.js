//=====SOCIAL MEDIA SHARING FUNCTIONALITY=====class SocialShare{constructor(){this.modal=null;this.isInitialized=false;}// Initialize the share functionality async initialize(){if(this.isInitialized)return;try{await this.loadModal();this.setupEventListeners();this.isInitialized=true;}catch(error){console.error('Failed to initialize social sharing:',error);}}// Load the share modal HTML async loadModal(){try{const response=await fetch(this.getRelativePath('components/share-modal.html'));const html=await response.text();// Create modal container const modalContainer=document.createElement('div');modalContainer.innerHTML=html;document.body.appendChild(modalContainer);this.modal=document.getElementById('shareModal');}catch(error){console.error('Failed to load share modal:',error);}}// Setup event listeners setupEventListeners(){if(!this.modal)return;// Modal controls const overlay=document.getElementById('shareModalOverlay');const closeBtn=document.getElementById('shareModalClose');overlay?.addEventListener('click',()=> this.closeModal());closeBtn?.addEventListener('click',()=> this.closeModal());// Share buttons const shareButtons=this.modal.querySelectorAll('.share-btn');shareButtons.forEach(btn=>{btn.addEventListener('click',(e)=>{const platform=e.currentTarget.dataset.platform;this.share(platform);});});// Copy URL functionality const copyUrlBtn=document.getElementById('copyUrlBtn');copyUrlBtn?.addEventListener('click',()=> this.copyUrl());// Close on Escape key document.addEventListener('keydown',(e)=>{if(e.key==='Escape' && this.modal.style.display !=='none'){this.closeModal();}});}// Get relative path based on current page location getRelativePath(file){const path=window.location.pathname;if(path.includes('/pages/')){return '../'+file;}return file;}// Open share modal with page data openShareModal(options={}){if(!this.modal)return;const defaults={title: document.title,description: this.getMetaDescription(),url: window.location.href,image: this.getMetaImage()};const data={...defaults,...options};// Update modal content document.getElementById('sharePreviewTitle').textContent=data.title;document.getElementById('sharePreviewDescription').textContent=data.description;document.getElementById('sharePreviewUrl').textContent=data.url;document.getElementById('shareUrlInput').value=data.url;const previewImage=document.getElementById('sharePreviewImage');if(data.image){previewImage.querySelector('img').src=data.image;previewImage.style.display='block';}else{previewImage.style.display='none';}// Show modal this.modal.style.display='flex';document.body.style.overflow='hidden';// Focus management this.modal.setAttribute('aria-hidden','false');}// Close share modal closeModal(){if(!this.modal)return;this.modal.style.display='none';document.body.style.overflow='';this.modal.setAttribute('aria-hidden','true');}// Get meta description getMetaDescription(){const metaDesc=document.querySelector('meta[name="description"]');return metaDesc ? metaDesc.getAttribute('content'): 'Check out this amazing content from EcoLife!';}// Get meta image getMetaImage(){const metaImg=document.querySelector('meta[property="og:image"]');return metaImg ? metaImg.getAttribute('content'): null;}// Share on different platforms share(platform){const title=document.getElementById('sharePreviewTitle').textContent;const url=document.getElementById('shareUrlInput').value;const description=document.getElementById('sharePreviewDescription').textContent;let shareUrl='';switch(platform){case 'facebook': shareUrl=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;break;case 'twitter': shareUrl=`https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}`;break;case 'whatsapp': // Check if mobile const isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(isMobile){shareUrl=`whatsapp://send?text=${encodeURIComponent(title+' '+url)}`;}else{shareUrl=`https://web.whatsapp.com/send?text=${encodeURIComponent(title+' '+url)}`;}break;case 'linkedin': shareUrl=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`;break;case 'copy': this.copyUrl();return;default: return;}// Open share URL in new window if(shareUrl){window.open(shareUrl,'_blank','width=600,height=400');}}// Copy URL to clipboard async copyUrl(){const urlInput=document.getElementById('shareUrlInput');const copyBtn=document.getElementById('copyUrlBtn');try{await navigator.clipboard.writeText(urlInput.value);// Visual feedback copyBtn.classList.add('copied');copyBtn.innerHTML='<i class="fas fa-check"></i> Copied!';setTimeout(()=>{copyBtn.classList.remove('copied');copyBtn.innerHTML='<i class="fas fa-copy"></i> Copy';},2000);}catch(error){// Fallback for older browsers urlInput.select();document.execCommand('copy');copyBtn.classList.add('copied');copyBtn.innerHTML='<i class="fas fa-check"></i> Copied!';setTimeout(()=>{copyBtn.classList.remove('copied');copyBtn.innerHTML='<i class="fas fa-copy"></i> Copy';},2000);}}// Add share button to element addShareButton(element,options={}){if(!element)return;const button=document.createElement('button');button.className='share-button';button.innerHTML='<i class="fas fa-share-alt"></i> Share';button.addEventListener('click',()=> this.openShareModal(options));element.appendChild(button);}}// Initialize social sharing when DOM is loaded document.addEventListener('DOMContentLoaded',()=>{window.socialShare=new SocialShare();window.socialShare.initialize();});// Export for global access window.SocialShare=SocialShare;
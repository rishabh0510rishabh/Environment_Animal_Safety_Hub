(function(){'use strict';const blogsData=[{id: 1,title: "Eco Gardening Tips",author: "User12",category: "environment",img: "https://picsum.photos/seed/blog1/300/200",content: "Eco gardening promotes natural growing methods using compost,native plants,and water conservation to protect the environment and improve soil health.",popularity: 180,createdAt: "2026-01-20"},{id: 2,title: "Plastic-Free Living",author: "User34",category: "diy",img: "https://picsum.photos/seed/blog2/300/200",content: "Plastic-free living focuses on reducing single-use plastics by switching to reusable products like cloth bags,metal bottles,and glass containers.",popularity: 165,createdAt: "2026-01-18"},{id: 3,title: "Solar Power Ideas",author: "User56",category: "energy",img: "https://picsum.photos/seed/blog3/300/200",content: "Solar energy is a clean and renewable power source. Using solar panels and solar-powered devices helps reduce electricity bills and carbon emissions.",popularity: 140,createdAt: "2026-01-15"},{id: 4,title: "Tech for Nature",author: "User78",category: "technology",img: "https://picsum.photos/seed/blog4/300/200",content: "Technology helps protect nature through tools like wildlife tracking,environmental sensors,and data-driven conservation efforts.",popularity: 150,createdAt: "2026-01-14"},{id: 5,title: "Composting at Home",author: "User90",category: "environment",img: "https://picsum.photos/seed/blog5/300/200",content: "Home composting turns kitchen waste into organic fertilizer,reducing landfill waste and improving soil quality naturally.",popularity: 132,createdAt: "2026-01-12"},{id: 6,title: "DIY Birdhouses",author: "User21",category: "diy",img: "https://picsum.photos/seed/blog6/300/200",content: "DIY birdhouses provide safe shelters for birds and support biodiversity. They are simple projects made using recycled materials.",popularity: 125,createdAt: "2026-01-11"},{id: 7,title: "Energy Efficient Homes",author: "User33",category: "energy",img: "https://picsum.photos/seed/blog7/300/200",content: "Energy-efficient homes use insulation,LED lighting,and smart appliances to reduce power usage and save money.",popularity: 160,createdAt: "2026-01-10"},{id: 8,title: "Urban Gardening Hacks",author: "User45",category: "environment",img: "https://picsum.photos/seed/blog8/300/200",content: "Urban gardening uses balconies,rooftops,and small spaces to grow plants using containers and vertical gardening techniques.",popularity: 118,createdAt: "2026-01-09"},{id: 9,title: "Rainwater Harvesting",author: "User11",category: "environment",img: "https://picsum.photos/seed/blog9/300/200",content: "Rainwater harvesting collects rainwater for reuse,reducing water bills and conserving groundwater resources.",popularity: 130,createdAt: "2026-01-08"},{id: 10,title: "Minimalist Home Decor",author: "User22",category: "diy",img: "https://picsum.photos/seed/blog10/300/200",content: "Minimalist decor focuses on simplicity,functionality,and natural materials to create calm and eco-friendly spaces.",popularity: 110,createdAt: "2026-01-07"},{id: 11,title: "Wind Energy Explained",author: "User35",category: "energy",img: "https://picsum.photos/seed/blog11/300/200",content: "Wind energy uses turbines to convert wind into electricity and is one of the most sustainable power sources.",popularity: 145,createdAt: "2026-01-06"},{id: 12,title: "Smart Irrigation Systems",author: "User46",category: "technology",img: "https://picsum.photos/seed/blog12/300/200",content: "Smart irrigation systems optimize water usage using sensors and weather data,reducing waste and improving plant growth.",popularity: 100,createdAt: "2026-01-05"},{id: 13,title: "Plant-Based Recipes",author: "User57",category: "diy",img: "https://picsum.photos/seed/blog13/300/200",content: "Plant-based diets rely on vegetables,grains,and legumes,offering health benefits and reducing environmental impact.",popularity: 112,createdAt: "2026-01-04"},{id: 14,title: "Green Roof Benefits",author: "User68",category: "environment",img: "https://picsum.photos/seed/blog14/300/200",content: "Green roofs reduce heat,manage rainwater,improve air quality,and create habitats for birds and insects.",popularity: 98,createdAt: "2026-01-03"},{id: 15,title: "Solar Panel Maintenance",author: "User79",category: "energy",img: "https://picsum.photos/seed/blog15/300/200",content: "Maintaining solar panels by cleaning and inspections ensures better efficiency and longer lifespan.",popularity: 120,createdAt: "2026-01-02"},{id: 16,title: "Home Automation for Energy Saving",author: "User80",category: "technology",img: "https://picsum.photos/seed/blog16/300/200",content: "Home automation controls lighting,temperature,and devices automatically to reduce energy usage.",popularity: 108,createdAt: "2026-01-01"},{id: 17,title: "Recycled Crafts Ideas",author: "User81",category: "diy",img: "https://picsum.photos/seed/blog17/300/200",content: "Recycled crafts transform waste materials into creative and useful products,helping reduce pollution.",popularity: 90,createdAt: "2025-12-30"},{id: 18,title: "Organic Vegetable Gardening",author: "User82",category: "environment",img: "https://picsum.photos/seed/blog18/300/200",content: "Organic vegetable gardening avoids chemicals and promotes healthy soil for safer and nutritious food.",popularity: 105,createdAt: "2025-12-28"},{id: 19,title: "LED Lighting Upgrades",author: "User83",category: "energy",img: "https://picsum.photos/seed/blog19/300/200",content: "LED lighting consumes less power,lasts longer,and reduces electricity bills compared to traditional bulbs.",popularity: 115,createdAt: "2025-12-26"},{id: 20,title: "Sustainable Tech Gadgets",author: "User84",category: "technology",img: "https://picsum.photos/seed/blog20/300/200",content: "Eco-friendly tech gadgets use less energy and are designed with sustainability in mind.",popularity: 94,createdAt: "2025-12-24"},{id: 21,title: "DIY Herb Garden",author: "User85",category: "diy",img: "https://picsum.photos/seed/blog21/300/200",content: "DIY herb gardens are easy to build at home and provide fresh herbs while promoting green living.",popularity: 102,createdAt: "2025-12-22"},{id: 22,title: "Compostable Kitchen Waste",author: "User86",category: "environment",img: "https://picsum.photos/seed/blog22/300/200",content: "Kitchen waste like fruit peels and leftovers can be composted to reduce garbage and enrich soil.",popularity: 88,createdAt: "2025-12-20"},{id: 23,title: "Geothermal Energy Basics",author: "User87",category: "energy",img: "https://picsum.photos/seed/blog23/300/200",content: "Geothermal energy uses heat from the earth to generate power and is a reliable renewable source.",popularity: 96,createdAt: "2025-12-18"},{id: 24,title: "Tech for Urban Farming",author: "User88",category: "technology",img: "https://picsum.photos/seed/blog24/300/200",content: "Urban farming technology helps grow food efficiently using hydroponics,sensors,and automation.",popularity: 92,createdAt: "2025-12-16"},{id: 25,title: "Upcycled Furniture Ideas",author: "User89",category: "diy",img: "https://picsum.photos/seed/blog25/300/200",content: "Upcycling furniture gives old items new life,reducing waste and adding unique style.",popularity: 85,createdAt: "2025-12-14"},{id: 26,title: "Indoor Air Quality Tips",author: "User90",category: "environment",img: "https://picsum.photos/seed/blog26/300/200",content: "Improving indoor air quality involves plants,ventilation,and reducing chemical pollutants.",popularity: 80,createdAt: "2025-12-12"},{id: 27,title: "Energy Star Appliances",author: "User91",category: "energy",img: "https://picsum.photos/seed/blog27/300/200",content: "Energy Star appliances consume less electricity and help save energy without losing performance.",popularity: 84,createdAt: "2025-12-10"},{id: 28,title: "Wearable Eco-Tech",author: "User92",category: "technology",img: "https://picsum.photos/seed/blog28/300/200",content: "Wearable eco-tech includes smart devices designed to be energy-efficient and environmentally friendly.",popularity: 76,createdAt: "2025-12-08"},{id: 29,title: "DIY Natural Cleaning Products",author: "User93",category: "diy",img: "https://picsum.photos/seed/blog29/300/200",content: "DIY natural cleaning products use simple ingredients like vinegar,baking soda,and lemon to keep homes clean without harmful chemicals.",popularity: 78,createdAt: "2025-12-06"}];// Normalize base data with fallbacks blogsData.forEach((blog,index)=>{if(!blog.createdAt){blog.createdAt=new Date(Date.now()-index * 86400000).toISOString();}if(typeof blog.popularity !=='number'){blog.popularity=50-index;}});let currentCommunitySort=(window.SortControl && window.SortControl.getSortPreference())|| 'newest';function renderBlogs(filter='all',search=''){const container=document.getElementById('blogs-container');container.innerHTML='';let filteredBlogs=blogsData.filter(blog=>{const matchesFilter=filter==='all' || blog.category===filter;const matchesSearch=blog.title.toLowerCase().includes(search.toLowerCase());return matchesFilter && matchesSearch;});filteredBlogs=sortBlogList(filteredBlogs);if(filteredBlogs.length===0){container.innerHTML="<p class='text-sm' style='text-align:center;width:100%'>No blogs found</p>";return;}filteredBlogs.forEach(blog=>{const blogCard=document.createElement('div');blogCard.className='blog-card';blogCard.innerHTML=` <img src="${blog.img}" alt="Blog Image"> <div class="blog-title">${blog.title}</div> <div class="blog-author">by ${blog.author}</div> <div class="blog-actions row"> <i class="fa-regular fa-heart upvote-btn" title="Upvote"></i> <i class="fa-regular fa-comment comment-btn" title="Comment"></i> <button class="read-btn" data-id="${blog.id}">Read More</button> </div> `;container.appendChild(blogCard);});}function openBlogDetail(blogId){const blog=blogsData.find(b=> b.id===blogId);if(!blog){return;}const modalContent=document.getElementById('blogModalContent');modalContent.innerHTML=` <div class="modal-image-wrapper"> <img src="${blog.img}" alt="${blog.title}"> </div> <div class="modal-content-wrapper"> <div class="modal-header"> <h2>${blog.title}</h2> <span class="category-badge">${blog.category}</span> </div> <div class="modal-meta"> <p><strong>Author:</strong> ${blog.author}</p> </div> </div> <hr style="margin: 16px 0"> <p style="line-height: 1.6;">${blog.content}</p> `;document.getElementById('blogModal').style.display='flex';document.body.style.overflow='hidden';}function closeBlogModal(){document.getElementById('blogModal').style.display='none';document.body.style.overflow='auto';}function initBlogSystem(){// Initial render renderBlogs();// Read More button click handler document.addEventListener('click',(e)=>{if(e.target.classList.contains('read-btn')){const blogId=Number(e.target.dataset.id);openBlogDetail(blogId);}});// Modal close handlers document.getElementById('blogModal').addEventListener('click',function(e){if(e.target===this){closeBlogModal();}});document.addEventListener('keydown',(e)=>{if(e.key==='Escape')closeBlogModal();});// Filter buttons document.querySelectorAll('.filter-btn').forEach(btn=>{btn.addEventListener('click',()=>{document.querySelectorAll('.filter-btn').forEach(b=> b.classList.remove('active'));btn.classList.add('active');const searchValue=document.querySelector('.top-bar .input')?.value || '';renderBlogs(btn.dataset.filter,searchValue);});});// Search functionality const searchInput=document.querySelector('.top-bar .input');searchInput?.addEventListener('input',()=>{const searchValue=searchInput.value.toLowerCase().trim();const activeFilter=document.querySelector('.filter-btn.active')?.dataset.filter || 'all';renderBlogs(activeFilter,searchValue);});// Create blog modal const createBtn=document.querySelector('.create-blog-btn');const modal=document.getElementById('createBlogModal');const closeModal=modal?.querySelector('.close-modal');const submitBtn=modal?.querySelector('.submit-blog-btn');if(createBtn){createBtn.addEventListener('click',()=> modal.style.display='flex');}if(closeModal){closeModal.addEventListener('click',()=> modal.style.display='none');window.addEventListener('click',e=>{if(e.target===modal)modal.style.display='none';});}// Submit blog handler if(submitBtn){submitBtn.addEventListener('click',()=>{const title=modal.querySelector('.blog-title-input').value.trim();const category=modal.querySelector('.blog-category-input').value;const desc=modal.querySelector('.blog-desc-input').value.trim();const imageInput=modal.querySelector('.blog-image-input');const imgURL=imageInput.files[0] ? URL.createObjectURL(imageInput.files[0]): 'https://picsum.photos/300/200';if(title && desc){const newBlog={title,author: 'You',category,img: imgURL,popularity: 0,createdAt: new Date().toISOString()};blogsData.unshift(newBlog);// add to top renderBlogs(document.querySelector('.filter-btn.active').dataset.filter,searchInput.value);modal.style.display='none';// Reset form modal.querySelector('.blog-title-input').value='';modal.querySelector('.blog-desc-input').value='';modal.querySelector('.blog-image-input').value='';}});}// View blog from right panel document.querySelectorAll('.view-blog-btn').forEach((btn,i)=>{btn.addEventListener('click',()=>{const blog=blogsData[i];if(blog){renderBlogs('all','');// Clear filter/search const container=document.getElementById('blogs-container');container.innerHTML='';const blogCard=document.createElement('div');blogCard.className='blog-card';blogCard.innerHTML=` <img src="${blog.img}" alt="Blog Image"> <div class="blog-title">${blog.title}</div> <div class="blog-author">by ${blog.author}</div> <p class="blog-desc-text">${blog.title}details and content goes here...</p> `;container.appendChild(blogCard);}});});initSortDropdown();}function sortBlogList(list){return list.slice().sort((a,b)=>{if(currentCommunitySort==='newest'){return new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime();}if(currentCommunitySort==='popular'){return(b.popularity || 0)-(a.popularity || 0);}return(a.title || '').localeCompare(b.title || '');});}function initSortDropdown(){if(!window.SortControl)return;const container=document.getElementById('community-sorter');if(!container)return;const dropdown=window.SortControl.createSortDropdown((value)=>{currentCommunitySort=value;renderBlogs(document.querySelector('.filter-btn.active')?.dataset.filter || 'all',document.querySelector('.top-bar .input')?.value || '');});container.appendChild(dropdown);}// Initialize when DOM is loaded document.addEventListener('DOMContentLoaded',initBlogSystem);})();
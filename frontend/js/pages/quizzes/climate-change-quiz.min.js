//=====ANIMATION INITIALIZATION=====AOS.init({duration: 800,once: true});//=====THEME MANAGEMENT=====const themeToggle=document.getElementById('themeToggle');const body=document.body;// Load saved theme preference if(localStorage.getItem('theme')==='light'){body.classList.add('light-theme');}// Theme toggle event handler themeToggle.addEventListener('click',()=>{body.classList.toggle('light-theme');localStorage.setItem('theme',body.classList.contains('light-theme')? 'light' : 'dark');});//=====QUIZ QUESTION DATABASE=====const allQuestions=[{q: "What is climate change?",o: ["Daily weather","Long-term temperature change","Rain only","Wind only"],a: 1},{q: "Main cause of global warming?",o: ["Trees","Greenhouse gases","Oxygen","Clouds"],a: 1},{q: "Which gas traps heat?",o: ["Oxygen","Carbon dioxide","Nitrogen","Helium"],a: 1},{q: "Which activity harms climate?",o: ["Planting trees","Burning fossil fuels","Recycling","Saving water"],a: 1},{q: "How can kids help climate?",o: ["Waste energy","Plant trees","Burn trash","Use plastic"],a: 1},{q: "Effect of global warming?",o: ["Ice melts","More forests","No change","Less sunlight"],a: 0},{q: "Eco-friendly transport?",o: ["Car","Plane","Cycle","Bike with fuel"],a: 2},{q: "Saving electricity helps?",o: ["More heat","Less pollution","More waste","Nothing"],a: 1},{q: "Which is renewable energy?",o: ["Coal","Solar","Oil","Gas"],a: 1},{q: "Plastic waste causes?",o: ["Clean ocean","Pollution","More fish","Cold water"],a: 1},{q: "Planting trees helps because?",o: ["Decoration","Absorb CO₂","Make noise","Waste land"],a: 1},{q: "Climate change affects?",o: ["Only animals","Only humans","Everyone","Nobody"],a: 2},{q: "Which saves water?",o: ["Fix leaks","Leave taps open","Waste water","Ignore"],a: 0},{q: "Best habit?",o: ["Reuse items","Throw trash","Burn waste","Ignore pollution"],a: 0},{q: "Earth is getting?",o: ["Colder","Warmer","Same","Frozen"],a: 1}];//=====QUIZ STATE MANAGEMENT=====let quiz=[];// Current quiz questions(10 random questions)let index=0;// Current question index let score=0;// Correct answers count let seconds=0;// Remaining time let timer=null;// Timer interval reference let userAnswers=[];// User's selected answers let selectedTime=300;// Default 5 minutes //=====PROGRESS PERSISTENCE=====const PROGRESS_KEY='climateChangeQuizProgress';function saveProgress(){const progress={currentIndex: index,userAnswers: userAnswers,score: score,remainingTime: seconds,selectedQuestions: quiz,selectedTime: selectedTime,timestamp: Date.now(),quizId: 'climate-change-quiz'};localStorage.setItem(PROGRESS_KEY,JSON.stringify(progress));}function loadProgress(){const saved=localStorage.getItem(PROGRESS_KEY);if(saved){const progress=JSON.parse(saved);index=progress.currentIndex || 0;userAnswers=progress.userAnswers || [];score=progress.score || 0;seconds=progress.remainingTime || 300;quiz=progress.selectedQuestions || [];selectedTime=progress.selectedTime || 300;return true;}return false;}function clearProgress(){localStorage.removeItem(PROGRESS_KEY);}//=====DOM ELEMENT REFERENCES=====const timeSelect=document.getElementById('timeSelect');const startScreen=document.getElementById('startScreen');const quizScreen=document.getElementById('quizScreen');const resultScreen=document.getElementById('resultScreen');const reviewScreen=document.getElementById('reviewScreen');const questionEl=document.getElementById('question');const optionsEl=document.getElementById('options');const timeEl=document.getElementById('time');const scoreEl=document.getElementById('score');const remarkEl=document.getElementById('remark');const reviewList=document.getElementById('reviewList');const qNumber=document.getElementById('q-number');//=====QUIZ INITIALIZATION=====function initializeQuiz(){// Check for existing progress on page load if(loadProgress()){const resumeSection=document.getElementById('resumeSection');if(resumeSection){resumeSection.style.display='block';}}}// Call initialization when DOM is loaded document.addEventListener('DOMContentLoaded',initializeQuiz);function startQuiz(){// Clear any existing progress when starting new quiz clearProgress();// Select 10 random questions from the database quiz=[...allQuestions].sort(()=> 0.5-Math.random()).slice(0,10);// Set timer based on user selection selectedTime=parseInt(timeSelect.value);seconds=selectedTime;// Reset quiz state index=0;score=0;userAnswers=new Array(quiz.length).fill(null);// Transition to quiz screen startScreen.style.display="none";quizScreen.style.display="block";// Load first question and start timer loadQuestion();startTimer();}//=====TIMER MANAGEMENT=====function startTimer(){updateTime();timer=setInterval(()=>{seconds--;updateTime();if(seconds <=0){clearInterval(timer);showResult();}},1000);}function updateTime(){let minutes=Math.floor(seconds / 60);let secs=seconds % 60;timeEl.textContent=`${minutes}:${secs < 10 ? '0' : ''}${secs}`;// Visual alert for low time remaining if(seconds < 10){timeEl.parentElement.style.color="#FF5252";}}//=====QUESTION DISPLAY=====function loadQuestion(){let currentQuestion=quiz[index];// Update progress metrics const progressText=document.querySelector('.progress-metrics span:first-child');if(progressText){const timeSpent=selectedTime-seconds;progressText.textContent=`Time Spent: ${timeSpent}s`;}const questionsCompleted=document.querySelector('.progress-metrics span:last-child');if(questionsCompleted){questionsCompleted.textContent=`Completed: ${index+1}/${quiz.length}`;}// Update progress bar const progressFill=document.getElementById('progressFill');if(progressFill){const progressPercent=((index+1)/ quiz.length)* 100;progressFill.style.width=`${progressPercent}%`;}// Update question number and text qNumber.textContent=index+1;questionEl.textContent=currentQuestion.q;// Clear previous options and create new ones optionsEl.innerHTML="";currentQuestion.o.forEach((option,optionIndex)=>{let optionButton=document.createElement("div");optionButton.className="option";optionButton.textContent=option;optionButton.onclick=()=> selectOption(optionButton,optionIndex);// Restore previous selection if navigating back if(userAnswers[index]===optionIndex){optionButton.classList.add("selected");}optionsEl.appendChild(optionButton);});}//=====ANSWER SELECTION=====function selectOption(element,optionIndex){// Remove previous selection highlight document.querySelectorAll(".option").forEach(option=> option.classList.remove("selected"));// Highlight selected option element.classList.add("selected");// Store user's answer userAnswers[index]=optionIndex;// Save progress after each answer selection saveProgress();}//=====QUESTION NAVIGATION=====function nextQuestion(){// Check if user has selected an answer if(userAnswers[index]==null){// Shake animation for next button to indicate missing answer const nextBtn=document.querySelector('.next-btn');nextBtn.style.transform="translateX(5px)";setTimeout(()=> nextBtn.style.transform="translateX(0)",100);return;}// Check answer and update score if(userAnswers[index]===quiz[index].a){score++;}// Save progress after moving to next question saveProgress();// Move to next question or show results index++;if(index < quiz.length){loadQuestion();}else{showResult();}}//=====QUIZ RESUME FUNCTIONALITY=====function resumeSavedQuiz(){if(loadProgress()){// Transition to quiz screen startScreen.style.display="none";quizScreen.style.display="block";// Load current question and resume timer loadQuestion();startTimer();}}function pauseQuiz(){// Stop the timer clearInterval(timer);timer=null;// Save progress saveProgress();// Show resume button and hide pause button const pauseBtn=document.getElementById('pauseBtn');const resumeBtn=document.getElementById('resumeBtn');if(pauseBtn)pauseBtn.style.display='none';if(resumeBtn)resumeBtn.style.display='inline-block';alert("Quiz paused! Click resume to continue.");}function resumeCurrentQuiz(){// Hide resume button and show pause button const pauseBtn=document.getElementById('pauseBtn');const resumeBtn=document.getElementById('resumeBtn');if(resumeBtn)resumeBtn.style.display='none';if(pauseBtn)pauseBtn.style.display='inline-block';// Restart timer startTimer();}//=====RESULTS DISPLAY=====function showResult(){// Stop timer and clear saved progress clearInterval(timer);clearProgress();// Transition to results screen quizScreen.style.display="none";resultScreen.style.display="block";// Display score scoreEl.textContent=`${score}/${quiz.length}`;// Calculate performance percentage and show appropriate remark let percentage=(score / quiz.length)* 100;if(percentage >=80){remarkEl.textContent="🌟 Climate Hero! Amazing!";}else if(percentage >=50){remarkEl.textContent="👍 Good Job! Keep learning!";}else{remarkEl.textContent="🌱 Don't give up! Try again!";}}//=====ANSWER REVIEW=====function showReview(){// Transition to review screen resultScreen.style.display="none";reviewScreen.style.display="block";// Clear previous review content reviewList.innerHTML="";// Generate review cards for each question quiz.forEach((question,questionIndex)=>{let userAnswer=userAnswers[questionIndex];let isCorrect=userAnswer===question.a;let userAnswerText=question.o[userAnswer] || "No Answer";let correctAnswerText=question.o[question.a];// Create review card with color-coded border reviewList.innerHTML+=` <div class="review-card" style="border-left-color: ${isCorrect ? 'var(--primary)' : 'var(--danger)'}"> <p><strong>Q${questionIndex+1}:</strong> ${question.q}</p> <p>Your Answer: <span class="${isCorrect ? 'correct' : 'wrong'}">${userAnswerText}</span></p> ${!isCorrect ? `<p>Correct Answer: <span class="correct">${correctAnswerText}</span></p>` : ''}</div> `;});}